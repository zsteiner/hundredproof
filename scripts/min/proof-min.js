function errorHandler(t){if($('[data-error="'+t+'"]').removeClass("is-hidden").siblings().addClass("is-hidden"),0===t)$(".hp-input").removeClass("has-error"),$("[data-error]").addClass("is-hidden");else if(1===t)$("#amount").addClass("has-error"),$(".hp-results").addClass("is-hidden");else{if(2!==t)return;$("#abv-starting, #abv-desired").addClass("has-error"),$(".hp-results").addClass("is-hidden")}}function isPlural(t){t===!0&&$("#amount-units").is(".is-plural")||(t===!0?($("#amount-units").find("option").append("s"),$("#amount-units").addClass("is-plural")):($("#amount-units.is-plural").find("option").each(function(){var t=$(this).text();$(this).text(t.slice(0,-1))}),$("#amount-units").removeClass("is-plural")))}function plural(t,a){a=parseFloat(a),1===a?t.next(".hp-unit").children(".plural").addClass("is-hidden"):t.next(".hp-unit").children(".plural").removeClass("is-hidden")}function pluralSelect(t,a){a=parseFloat(a),isPlural(1===a?!1:!0)}function convert(){if("cups"===amountUnits)amount*=ozToCups;else{if("jiggers"!==amountUnits)return;amount*=ozToJigger}}function dilute(){isNaN(amount)?(amount=0,startingABV=0,desiredABV=0):isNaN(startingABV)?(amount=0,startingABV=0,desiredABV=0):isNaN(desiredABV)?(amount=0,startingABV=0,desiredABV=0):(amountWaterOz=(startingABV-desiredABV)/desiredABV*amount,amountWaterTeaspoon=amountWaterOz/ozToTeaspoons,amountWaterCups=amountWaterOz/ozToCups)}function data(){amount=$("#amount").val(),startingABV=$("#abv-starting").val(),desiredABV=$("#abv-desired").val(),convert(),pluralSelect($("#amount"),amount),amount=parseFloat(amount),startingABV=parseFloat(startingABV),desiredABV=parseFloat(desiredABV)}function results(){0>=amount?errorHandler(1):desiredABV>startingABV?errorHandler(2):(errorHandler(0),amountWaterOz=(startingABV-desiredABV)/desiredABV*amount,amountWaterTeaspoon=amountWaterOz/ozToTeaspoons,amountWaterCups=amountWaterOz/ozToCups,$(".hp-results").removeClass("is-hidden")),plural($("#result-oz"),amountWaterOz.toFixed(2)),$("#result-oz").text(+amountWaterOz.toFixed(2)),amountWaterOz>=2?(plural($("#result-translate"),amountWaterCups.toFixed(2)),$("#result-translate").text(+amountWaterCups.toFixed(2)),$("#result-cups").removeClass("is-hidden"),$("#result-teaspoons").addClass("is-hidden")):(plural($("#result-translate"),amountWaterTeaspoon.toFixed(2)),$("#result-translate").text(+amountWaterTeaspoon.toFixed(2)),$("#result-teaspoons").removeClass("is-hidden"),$("#result-cups").addClass("is-hidden"))}var amount=1,amountUnits="ounce",startingUnits="proof",startingABV=100,desiredABV=80,amountWaterOz=0,amountWaterTeaspoon=0;amountWaterCups=0;var ozToTeaspoons=.1666666666666667,ozToCups=8;ozToJigger=1.5,$(".input-resize").autosizeInput(),$("input[data-visibility]").click(function(){var t=$(this).data("visibility");$(".hp-inputs").attr("data-visibility",t),"abv"===startingUnits&&"proof"===t?(startingABV=2*startingABV,desiredABV=2*desiredABV,$("#abv-starting").val(startingABV),$("#abv-desired").val(desiredABV)):(startingABV/=2,desiredABV/=2,$("#abv-starting").val(startingABV),$("#abv-desired").val(desiredABV)),startingUnits=t}),$(".hp-input").keyup(function(){var t=$(this).val();data(),dilute(),results(),plural($(this),t)}),$("#amount-units").change(function(){data(),dilute(),results()});