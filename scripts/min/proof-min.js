function checkLocalStorage(){ingredients=localStorage.getItem("ingredients"),ingredients=JSON.parse(ingredients),$.isEmptyObject(ingredients)&&(ingredients=ingredientsBlank)}function storeLocal(){localStorage.setItem("ingredients",JSON.stringify(ingredients))}function errorHandler(t){if($('[data-error="'+t+'"]').removeClass("is-hidden").siblings().addClass("is-hidden"),0===t)$(".hp-input").removeClass("has-error"),$("[data-error]").addClass("is-hidden");else if(1===t)$("#amount").addClass("has-error"),$(".hp-results").addClass("is-hidden");else{if(2!==t)return;$("#abv-starting, #abv-desired").addClass("has-error"),$(".hp-results").addClass("is-hidden")}}function plural(t,e){e=parseFloat(e).toFixed(2),"1.00"===e?t.parents(".hp-input__group, .hp-result__group").find(".plural").addClass("is-hidden"):t.parents(".hp-input__group, .hp-result__group").find(".plural").removeClass("is-hidden")}function convert(){if("cups"===amountUnits)amount*=ozToCups;else{if("jiggers"!==amountUnits)return;amount*=ozToJigger}}function dilute(){isNaN(amount)?(amount=0,startingABV=0,desiredABV=0):isNaN(startingABV)?(amount=0,startingABV=0,desiredABV=0):isNaN(desiredABV)?(amount=0,startingABV=0,desiredABV=0):(amountWaterOz=(startingABV-desiredABV)/desiredABV*amount,amountWaterTeaspoon=amountWaterOz/ozToTeaspoons,amountWaterCups=amountWaterOz/ozToCups)}function diluteData(){amount=$("#amount").val(),startingABV=$("#abv-starting").val(),desiredABV=$("#abv-desired").val(),convert(),amount=parseFloat(amount),startingABV=parseFloat(startingABV),desiredABV=parseFloat(desiredABV)}function diluteResults(){0>=amount?errorHandler(1):desiredABV>startingABV?errorHandler(2):(errorHandler(0),amountWaterOz=(startingABV-desiredABV)/desiredABV*amount,amountWaterTeaspoon=amountWaterOz/ozToTeaspoons,amountWaterCups=amountWaterOz/ozToCups,$(".hp-results").removeClass("is-hidden")),plural($("#result-oz"),amountWaterOz),$("#result-oz").text(+amountWaterOz.toFixed(2)),amountWaterOz>=2?(plural($("#result-translate"),amountWaterCups),$("#result-translate").text(+amountWaterCups.toFixed(2)),$("#result-cups").removeClass("is-hidden"),$("#result-teaspoons").addClass("is-hidden")):(plural($("#result-translate"),amountWaterTeaspoon),$("#result-translate").text(+amountWaterTeaspoon.toFixed(2)),$("#result-teaspoons").removeClass("is-hidden"),$("#result-cups").addClass("is-hidden"))}function storeIngredients(t){var e=t.find(".hp-ingredient__amount").val(),a=t.find(".hp-ingredient__name").val(),n=t.find(".hp-ingredient__unit").val();ingredients.amount=e,ingredients.name=a,ingredients.unit=n,console.log(e+n+a),storeLocal()}var amount=1,amountUnits="ounce",startingUnits="proof",startingABV=100,desiredABV=80,amountWaterOz=0,amountWaterTeaspoon=0,amountWaterCups=0,ingredients,ozToTeaspoons=.1666666666666667,ozToCups=8;ozToJigger=1.5;var ingredientsBlank=[{amount:"",name:"",unit:""}];checkLocalStorage(),$(".input-resize").autosizeInput(),$("input[data-visibility]").click(function(){var t=$(this).data("visibility");$(".hp-inputs").attr("data-visibility",t),"abv"===startingUnits&&"proof"===t?(startingABV=2*startingABV,desiredABV=2*desiredABV,$("#abv-starting").val(startingABV),$("#abv-desired").val(desiredABV)):(startingABV/=2,desiredABV/=2,$("#abv-starting").val(startingABV),$("#abv-desired").val(desiredABV)),startingUnits=t}),$(".hp-input").keyup(function(){var t=$(this).val();diluteData(),dilute(),diluteResults(),$(this).is("#amount")&&plural($(this),t)}),$("#amount-units input").click(function(){amountUnits=$(this).val(),diluteData(),dilute(),diluteResults()}),$(".hp-button--add").click(function(){var t=$(".hp-ingredient.is-template").prev(".hp-ingredient");storeIngredients(t),console.log(ingredients),$(this).prev(".hp-ingredient__list").children(".hp-ingredient.is-template").clone().insertBefore(".hp-ingredient.is-template").removeClass("is-template is-hidden")}),$(".hp-button--submit").click(function(){});